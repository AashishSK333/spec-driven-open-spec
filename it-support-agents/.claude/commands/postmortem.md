---
name: "Post-Mortem"
description: Generate a post-incident review report from ticket history, logs, and resolution data
category: Incident Management
tags: [postmortem, review, report]
---

Generate a comprehensive post-incident review report by analyzing the full incident history, log data, and resolution details. Identify improvement areas and propose spec/runbook updates.

**Input:** An incident ticket ID (e.g., `INC0012345`). The incident should be in Resolved or Closed status.

## Instructions

You are activating the **Incident Responder** agent in post-incident review mode. Follow these steps:

### 1. Load your role

Read `agents/incident-responder.md` — focus on the "On Resolution" behavior and post-incident responsibilities.

### 2. Determine autonomy level

Read `config/framework.yaml` for `active_autonomy_level`, then read `config/autonomy-levels.yaml`.

### 3. Retrieve full incident history

Use the **ticket-management** skill (read action) to fetch:
- Full ticket details: summary, description, category, priority, severity
- Complete work notes history (all entries, chronological)
- Status change history with timestamps
- Assignee changes (was it escalated? bounced?)
- Related tickets (parent, linked, duplicates)
- Resolution details: root cause, resolution steps, resolution category

### 4. Retrieve log data

Use the **log-analysis** skill to pull logs from the incident timeframe:
- Time range: from 30 minutes before the incident was reported to the resolution time
- Target: the affected system(s) from the ticket
- Focus on: error patterns, the moment of failure, and the moment of recovery

### 5. Construct the timeline

Build a chronological timeline from the combined data:

```
### Timeline

| Time (UTC) | Event | Source |
|------------|-------|--------|
| <time> | Alert triggered / Issue reported | Monitoring / User |
| <time> | Ticket created | ITSM |
| <time> | Analyst assigned | ITSM |
| <time> | First diagnostic action | Work note |
| <time> | Escalation to <team> | Work note |
| <time> | Root cause identified | Work note |
| <time> | Remediation applied | Work note |
| <time> | Service restored | Monitoring |
| <time> | Ticket resolved | ITSM |
```

Calculate key metrics:
- **Time to detect**: Alert time - actual issue start (if determinable from logs)
- **Time to respond**: First work note - ticket creation
- **Time to resolve**: Resolution - ticket creation (minus hold time)
- **Total duration**: End to end elapsed time

### 6. Generate the post-incident report

Use the **report-generation** skill with `templates/incident-report.md`:

```
## Post-Incident Report: <ticket-id>

**Generated**: <timestamp>
**Generated by**: IT Support Agent
**Incident Priority**: <P1-P4>

### Summary
| Metric             | Value          |
|--------------------|----------------|
| Incident ID        | <value>        |
| Priority           | <value>        |
| Duration           | <value>        |
| Time to Detect     | <value>        |
| Time to Respond    | <value>        |
| Time to Resolve    | <value>        |
| SLA Met?           | <Yes/No>       |
| Escalations        | <count>        |
| Teams Involved     | <list>         |

### Timeline
<constructed timeline from step 5>

### Impact
- Services affected: <list>
- Users affected: <count or estimate>
- Business impact: <description>

### Root Cause
<from ticket resolution details>

### Resolution
<what was done to fix it>

### Diagnostic Steps Taken
<ordered list of what was checked and found>

### Lessons Learned
1. <what went well>
2. <what could be improved>
3. <what was missing — knowledge, runbook, tool access>

### Action Items
<numbered list of follow-up actions>

### Recurrence Prevention
<recommendations to prevent this from happening again>
```

### 7. Identify improvement areas

Analyze the incident handling for process improvements:

- **Was a runbook followed?** If yes, was it effective? If not, should one be created?
- **Was the categorization accurate?** Did the initial triage correctly identify the issue?
- **Were escalations necessary?** Could they have been avoided with better tools or knowledge?
- **Was knowledge available?** Did relevant articles exist in `knowledge/`?
- **SLA compliance**: Was the SLA met? If not, where was time lost?

### 8. Propose updates

Based on the analysis, recommend:
- **New runbook**: If no procedure existed for this type of incident
- **Runbook update**: If the existing runbook was incomplete or inaccurate
- **Spec update**: If categorization or prioritization rules should change
- **Knowledge article**: If troubleshooting steps should be documented for future reference
- **Process change**: If escalation or communication could be improved

Present all proposals for human review — never auto-publish post-incident findings.

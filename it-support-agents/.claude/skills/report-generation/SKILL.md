---
name: report-generation
description: Generate structured reports from templates by populating placeholders with provided data and derived metrics.
metadata:
  author: it-support-team
  version: "1.0"
  autonomy_level: 1
  requires_approval: false
---

Generate formatted markdown reports by loading a template from `templates/`, populating placeholder fields with provided data, deriving calculable fields, and flagging any missing information.

**Input:** Report type (`incident-report` | `morning-check-report` | `knowledge-article`) and a data payload containing the values to populate into the template.

## Steps

### 1. Load the matching template

Based on the report type, load:
- `incident-report` → `templates/incident-report.md`
- `morning-check-report` → `templates/morning-check-report.md`
- `knowledge-article` → `templates/knowledge-article.md`

If the template file is missing, report the error and stop.

### 2. Populate placeholder fields

Scan the template for `{{PLACEHOLDER}}` markers and replace each with the corresponding value from the input data:
- Match placeholder names to data keys (case-insensitive)
- Preserve the markdown formatting around each placeholder
- For list/table placeholders: expand into properly formatted markdown lists or table rows

### 3. Derive calculable fields

For fields that can be calculated from other provided data:
- **Duration**: `resolution_time - detection_time`
- **Time to respond**: `first_response_time - creation_time`
- **SLA compliance**: compare actual times against SLA targets from environment config
- **Trend indicators**: compare current values against previous report values (if provided)
  - ↑ increasing, ↓ decreasing, → stable

### 4. Flag missing required fields

Identify any `{{PLACEHOLDER}}` values that were not provided and could not be derived:
- Mark each as: `**[NOT PROVIDED]**`
- Compile a list of missing fields at the end of the report
- Do NOT fabricate data to fill gaps

### 5. Format the final report

- Add generation metadata at the top:
  - **Generated**: timestamp
  - **Generated by**: IT Support Agent
  - **Report type**: <type>
- Ensure all tables are properly aligned
- Ensure all markdown headers, lists, and formatting are valid
- Remove any remaining raw placeholder markers

## Output

The complete markdown report, ready for posting or filing. Example structure for an incident report:

```
## Incident Report: <ticket-id>

**Generated**: <timestamp>
**Generated by**: IT Support Agent
**Report Type**: Incident Report

### Summary
| Field            | Value                     |
|------------------|---------------------------|
| Incident ID      | <value>                   |
| Priority         | <value>                   |
| Duration         | <derived value>           |
| Root Cause       | <value>                   |
| Resolution       | <value>                   |

### Timeline
- **<time>** — <event>
- **<time>** — <event>
- **<time>** — <event>

### Impact
<populated from template>

### Resolution Details
<populated from template>

### Lessons Learned
<populated from template>

---
**Missing Fields**: <list of any NOT PROVIDED fields, or "None — all fields populated">
```

## Guardrails

- **NEVER fabricate data** for missing fields — always mark as `**[NOT PROVIDED]**` and list at the end
- Always include the **generation timestamp** and **agent attribution** in the report header
- The report is a **local artifact** — posting, sharing, or filing it is handled by other skills (notification, ticket-management) or by the human
- If the template contains sections that are not relevant to the current report (e.g., "Lessons Learned" for a P4 ticket), include the section with "N/A — not applicable for this priority level"
- Never modify the template file itself — templates are read-only sources
- If the provided data contains inconsistencies (e.g., resolution time before detection time), flag the inconsistency in the report rather than silently correcting it
